{"version":3,"names":["_unfetch","_interopRequireDefault","require","_eventSourcePolyfill","_eventsource","_onDemandEntriesUtils","e","__esModule","default","window","EventSource","EventSourcePolyfill","data","JSON","parse","document","getElementById","textContent","assetPrefix","page","mostRecentHash","curHash","__webpack_hash__","hotUpdatePath","endsWith","isUpdateAvailable","canApplyUpdates","module","hot","status","tryApplyUpdates","res","fetch","json","curPage","pageUpdated","Object","keys","c","some","mod","indexOf","substr","replace","location","reload","err","console","error","getEventSourceWrapper","path","addMessageListener","event","message","action","hash","ex","warn","setupPing"],"sources":["amp-dev.js"],"sourcesContent":["/* globals __webpack_hash__ */\nimport fetch from 'unfetch'\nimport EventSourcePolyfill from './event-source-polyfill'\nimport { getEventSourceWrapper } from './error-overlay/eventsource'\nimport { setupPing } from './on-demand-entries-utils'\n\nif (!window.EventSource) {\n  window.EventSource = EventSourcePolyfill\n}\n\nconst data = JSON.parse(document.getElementById('__NEXT_DATA__').textContent)\nlet { assetPrefix, page } = data\nassetPrefix = assetPrefix || ''\nlet mostRecentHash = null\n/* eslint-disable-next-line */\nlet curHash = __webpack_hash__\nconst hotUpdatePath =\n  assetPrefix + (assetPrefix.endsWith('/') ? '' : '/') + '_next/static/webpack/'\n\n// Is there a newer version of this code available?\nfunction isUpdateAvailable () {\n  // __webpack_hash__ is the hash of the current compilation.\n  // It's a global variable injected by Webpack.\n  /* eslint-disable-next-line */\n  return mostRecentHash !== __webpack_hash__\n}\n\n// Webpack disallows updates in other states.\nfunction canApplyUpdates () {\n  return module.hot.status() === 'idle'\n}\n\n// This function reads code updates on the fly and hard\n// reloads the page when it has changed.\nasync function tryApplyUpdates () {\n  if (!isUpdateAvailable() || !canApplyUpdates()) {\n    return\n  }\n  try {\n    const res = await fetch(`${hotUpdatePath}${curHash}.hot-update.json`)\n    const data = await res.json()\n    const curPage = page === '/' ? 'index' : page\n    const pageUpdated = Object.keys(data.c).some(mod => {\n      return (\n        mod.indexOf(\n          `pages${curPage.substr(0, 1) === '/' ? curPage : `/${curPage}`}`\n        ) !== -1 ||\n        mod.indexOf(\n          `pages${\n            curPage.substr(0, 1) === '/' ? curPage : `/${curPage}`\n          }`.replace(/\\//g, '\\\\')\n        ) !== -1\n      )\n    })\n\n    if (pageUpdated) {\n      document.location.reload(true)\n    } else {\n      curHash = mostRecentHash\n    }\n  } catch (err) {\n    console.error('Error occurred checking for update', err)\n    document.location.reload(true)\n  }\n}\n\ngetEventSourceWrapper({\n  path: `${assetPrefix}/_next/webpack-hmr`\n}).addMessageListener(event => {\n  if (event.data === '\\uD83D\\uDC93') {\n    return\n  }\n\n  try {\n    const message = JSON.parse(event.data)\n\n    if (message.action === 'sync' || message.action === 'built') {\n      if (!message.hash) {\n        return\n      }\n      mostRecentHash = message.hash\n      tryApplyUpdates()\n    } else if (message.action === 'reloadPage') {\n      document.location.reload(true)\n    }\n  } catch (ex) {\n    console.warn('Invalid HMR message: ' + event.data + '\\n' + ex)\n  }\n})\n\nsetupPing(assetPrefix, () => page)\n"],"mappings":"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","ignoreList":[]}