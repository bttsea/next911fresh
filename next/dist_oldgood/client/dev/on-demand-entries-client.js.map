{"version":3,"names":["_router","_interopRequireDefault","require","_onDemandEntriesUtils","e","__esModule","default","_default","assetPrefix","Router","ready","events","on","setupPing","bind","pathname","currentPage","process","env","__NEXT_TEST_MODE","document","addEventListener","event","state","visibilityState","closePing","exports"],"sources":["on-demand-entries-client.js"],"sourcesContent":["/* global window */\n\nimport Router from 'next/router'\nimport { setupPing, currentPage, closePing } from './on-demand-entries-utils'\n\nexport default async ({ assetPrefix }) => {\n  Router.ready(() => {\n    Router.events.on(\n      'routeChangeComplete',\n      setupPing.bind(this, assetPrefix, () => Router.pathname)\n    )\n  })\n\n  setupPing(assetPrefix, () => Router.pathname, currentPage)\n\n  // prevent HMR connection from being closed when running tests\n  if (!process.env.__NEXT_TEST_MODE) {\n    document.addEventListener('visibilitychange', event => {\n      const state = document.visibilityState\n      if (state === 'visible') {\n        setupPing(assetPrefix, () => Router.pathname, true)\n      } else {\n        closePing()\n      }\n    })\n  }\n}\n"],"mappings":"4DAEA,IAAAA,OAAA,CAAAC,sBAAA,CAAAC,OAAA,iBACA,IAAAC,qBAAA,CAAAD,OAAA,8BAA6E,SAAAD,uBAAAG,CAAA,SAAAA,CAAA,EAAAA,CAAA,CAAAC,UAAA,CAAAD,CAAA,EAAAE,OAAA,CAAAF,CAAA,GAH7E,uBAAAG,QAAA,CAKe,KAAAA,CAAO,CAAEC,WAAY,CAAC,GAAK,CACxCC,eAAM,CAACC,KAAK,CAAC,IAAM,CACjBD,eAAM,CAACE,MAAM,CAACC,EAAE,CACd,qBAAqB,CACrBC,+BAAS,CAACC,IAAI,QAAON,WAAW,CAAE,IAAMC,eAAM,CAACM,QAAQ,CACzD,CAAC,CACH,CAAC,CAAC,CAEF,GAAAF,+BAAS,EAACL,WAAW,CAAE,IAAMC,eAAM,CAACM,QAAQ,CAAEC,iCAAW,CAAC,CAE1D;AACA,GAAI,CAACC,OAAO,CAACC,GAAG,CAACC,gBAAgB,CAAE,CACjCC,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,CAAEC,KAAK,EAAI,CACrD,KAAM,CAAAC,KAAK,CAAGH,QAAQ,CAACI,eAAe,CACtC,GAAID,KAAK,GAAK,SAAS,CAAE,CACvB,GAAAV,+BAAS,EAACL,WAAW,CAAE,IAAMC,eAAM,CAACM,QAAQ,CAAE,IAAI,CAAC,CACrD,CAAC,IAAM,CACL,GAAAU,+BAAS,EAAC,CAAC,CACb,CACF,CAAC,CAAC,CACJ,CACF,CAAC,CAAAC,OAAA,CAAApB,OAAA,CAAAC,QAAA","ignoreList":[]}