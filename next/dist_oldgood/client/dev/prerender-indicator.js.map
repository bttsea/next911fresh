{"version":3,"names":["_router","_interopRequireDefault","require","e","__esModule","default","initializeBuildWatcher","shadowHost","document","createElement","id","style","position","bottom","right","width","height","zIndex","transition","body","appendChild","shadowRoot","prefix","attachShadow","mode","container","createContainer","css","createCss","expandEl","querySelector","closeEl","dismissKey","dismissUntil","parseInt","window","localStorage","getItem","dismissed","Date","getTime","isVisible","__NEXT_DATA__","nextExport","updateContainer","classList","add","remove","expandedClass","toggleTimeout","toggleExpand","expand","clearTimeout","setTimeout","display","addEventListener","oneHourAway","setItem","Router","events","on","next","isPrerendered","innerHTML","textContent"],"sources":["prerender-indicator.js"],"sourcesContent":["import Router from '../router'\n\nexport default function initializeBuildWatcher () {\n  const shadowHost = document.createElement('div')\n  shadowHost.id = '__next-prerender-indicator'\n  // Make sure container is fixed and on a high zIndex so it shows\n  shadowHost.style.position = 'fixed'\n  shadowHost.style.bottom = '20px'\n  shadowHost.style.right = '10px'\n  shadowHost.style.width = 0\n  shadowHost.style.height = 0\n  shadowHost.style.zIndex = 99998\n  shadowHost.style.transition = 'all 100ms ease'\n\n  document.body.appendChild(shadowHost)\n\n  let shadowRoot\n  let prefix = ''\n\n  if (shadowHost.attachShadow) {\n    shadowRoot = shadowHost.attachShadow({ mode: 'open' })\n  } else {\n    // If attachShadow is undefined then the browser does not support\n    // the Shadow DOM, we need to prefix all the names so there\n    // will be no conflicts\n    shadowRoot = shadowHost\n    prefix = '__next-prerender-indicator-'\n  }\n\n  // Container\n  const container = createContainer(prefix)\n  shadowRoot.appendChild(container)\n\n  // CSS\n  const css = createCss(prefix)\n  shadowRoot.appendChild(css)\n\n  const expandEl = container.querySelector('a')\n  const closeEl = container.querySelector(`#${prefix}close`)\n\n  // State\n  const dismissKey = '__NEXT_DISMISS_PRERENDER_INDICATOR'\n  const dismissUntil = parseInt(window.localStorage.getItem(dismissKey), 10)\n  const dismissed = dismissUntil > new Date().getTime()\n\n  let isVisible = !dismissed && window.__NEXT_DATA__.nextExport\n\n  function updateContainer () {\n    if (isVisible) {\n      container.classList.add(`${prefix}visible`)\n    } else {\n      container.classList.remove(`${prefix}visible`)\n    }\n  }\n  const expandedClass = `${prefix}expanded`\n  let toggleTimeout\n\n  const toggleExpand = (expand = true) => {\n    clearTimeout(toggleTimeout)\n\n    toggleTimeout = setTimeout(() => {\n      if (expand) {\n        expandEl.classList.add(expandedClass)\n        closeEl.style.display = 'flex'\n      } else {\n        expandEl.classList.remove(expandedClass)\n        closeEl.style.display = 'none'\n      }\n    }, 50)\n  }\n\n  closeEl.addEventListener('click', () => {\n    const oneHourAway = new Date().getTime() + 1 * 60 * 60 * 1000\n    window.localStorage.setItem(dismissKey, oneHourAway + '')\n    isVisible = false\n    updateContainer()\n  })\n  closeEl.addEventListener('mouseenter', () => toggleExpand())\n  closeEl.addEventListener('mouseleave', () => toggleExpand(false))\n  expandEl.addEventListener('mouseenter', () => toggleExpand())\n  expandEl.addEventListener('mouseleave', () => toggleExpand(false))\n\n  Router.events.on('routeChangeComplete', () => {\n    isVisible = window.next.isPrerendered\n    updateContainer()\n  })\n  updateContainer()\n}\n\nfunction createContainer (prefix) {\n  const container = document.createElement('div')\n  container.id = `${prefix}container`\n  container.innerHTML = `\n    <button id=\"${prefix}close\" title=\"Hide indicator for session\">\n      <span>Ã—</span>\n    </button>\n    <a href=\"https://nextjs.org/docs#automatic-static-optimization-indicator\" target=\"_blank\">\n      <div id=\"${prefix}icon-wrapper\">\n          <svg width=\"15\" height=\"20\" viewBox=\"0 0 60 80\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path d=\"M36 3L30.74 41H8L36 3Z\" fill=\"black\"/>\n          <path d=\"M25 77L30.26 39H53L25 77Z\" fill=\"black\"/>\n          <path d=\"M13.5 33.5L53 39L47.5 46.5L7 41.25L13.5 33.5Z\" fill=\"black\"/>\n          </svg>\n          Prerendered Page\n      </div>\n    </a>\n  `\n  return container\n}\n\nfunction createCss (prefix) {\n  const css = document.createElement('style')\n  css.textContent = `\n    #${prefix}container {\n      position: absolute;\n      display: none;\n      bottom: 10px;\n      right: 15px;\n    }\n\n    #${prefix}close {\n      top: -10px;\n      right: -10px;\n      border: none;\n      width: 18px;\n      height: 18px;\n      color: #333333;\n      font-size: 16px;\n      cursor: pointer;\n      display: none;\n      position: absolute;\n      background: #ffffff;\n      border-radius: 100%;\n      align-items: center;\n      flex-direction: column;\n      justify-content: center;\n    }\n\n    #${prefix}container a {\n      color: inherit;\n      text-decoration: none;\n      width: 15px;\n      height: 23px;\n      overflow: hidden;\n\n      border-radius: 3px;\n      background: #fff;\n      color: #000;\n      font: initial;\n      cursor: pointer;\n      letter-spacing: initial;\n      text-shadow: initial;\n      text-transform: initial;\n      visibility: initial;\n      font-size: 14px;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n\n      padding: 4px 2px;\n      align-items: center;\n      box-shadow: 0 11px 40px 0 rgba(0, 0, 0, 0.25), 0 2px 10px 0 rgba(0, 0, 0, 0.12);\n\n      display: flex;\n      transition: opacity 0.1s ease, bottom 0.1s ease, width 0.3s ease;\n      animation: ${prefix}fade-in 0.1s ease-in-out;\n    }\n\n    #${prefix}icon-wrapper {\n      width: 140px;\n      height: 20px;\n      display: flex;\n      flex-shrink: 0;\n      align-items: center;\n      position: relative;\n    }\n\n    #${prefix}icon-wrapper svg {\n      flex-shrink: 0;\n      margin-right: 3px;\n    }\n\n    #${prefix}container a.${prefix}expanded {\n      width: 135px;\n    }\n\n    #${prefix}container.${prefix}visible {\n      display: flex;\n      bottom: 10px;\n      opacity: 1;\n    }\n\n    @keyframes ${prefix}fade-in {\n      from {\n        bottom: 0px;\n        opacity: 0;\n      }\n      to {\n        bottom: 10px;\n        opacity: 1;\n      }\n    }\n  `\n\n  return css\n}\n"],"mappings":"4EAAA,IAAAA,OAAA,CAAAC,sBAAA,CAAAC,OAAA,eAA8B,SAAAD,uBAAAE,CAAA,SAAAA,CAAA,EAAAA,CAAA,CAAAC,UAAA,CAAAD,CAAA,EAAAE,OAAA,CAAAF,CAAA,GAEf,QAAS,CAAAG,sBAAsBA,CAAA,CAAI,CAChD,KAAM,CAAAC,UAAU,CAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC,CAChDF,UAAU,CAACG,EAAE,CAAG,4BAA4B,CAC5C;AACAH,UAAU,CAACI,KAAK,CAACC,QAAQ,CAAG,OAAO,CACnCL,UAAU,CAACI,KAAK,CAACE,MAAM,CAAG,MAAM,CAChCN,UAAU,CAACI,KAAK,CAACG,KAAK,CAAG,MAAM,CAC/BP,UAAU,CAACI,KAAK,CAACI,KAAK,CAAG,CAAC,CAC1BR,UAAU,CAACI,KAAK,CAACK,MAAM,CAAG,CAAC,CAC3BT,UAAU,CAACI,KAAK,CAACM,MAAM,CAAG,KAAK,CAC/BV,UAAU,CAACI,KAAK,CAACO,UAAU,CAAG,gBAAgB,CAE9CV,QAAQ,CAACW,IAAI,CAACC,WAAW,CAACb,UAAU,CAAC,CAErC,GAAI,CAAAc,UAAU,CACd,GAAI,CAAAC,MAAM,CAAG,EAAE,CAEf,GAAIf,UAAU,CAACgB,YAAY,CAAE,CAC3BF,UAAU,CAAGd,UAAU,CAACgB,YAAY,CAAC,CAAEC,IAAI,CAAE,MAAO,CAAC,CAAC,CACxD,CAAC,IAAM,CACL;AACA;AACA;AACAH,UAAU,CAAGd,UAAU,CACvBe,MAAM,CAAG,6BAA6B,CACxC,CAEA;AACA,KAAM,CAAAG,SAAS,CAAGC,eAAe,CAACJ,MAAM,CAAC,CACzCD,UAAU,CAACD,WAAW,CAACK,SAAS,CAAC,CAEjC;AACA,KAAM,CAAAE,GAAG,CAAGC,SAAS,CAACN,MAAM,CAAC,CAC7BD,UAAU,CAACD,WAAW,CAACO,GAAG,CAAC,CAE3B,KAAM,CAAAE,QAAQ,CAAGJ,SAAS,CAACK,aAAa,CAAC,GAAG,CAAC,CAC7C,KAAM,CAAAC,OAAO,CAAGN,SAAS,CAACK,aAAa,CAAC,IAAIR,MAAM,OAAO,CAAC,CAE1D;AACA,KAAM,CAAAU,UAAU,CAAG,oCAAoC,CACvD,KAAM,CAAAC,YAAY,CAAGC,QAAQ,CAACC,MAAM,CAACC,YAAY,CAACC,OAAO,CAACL,UAAU,CAAC,CAAE,EAAE,CAAC,CAC1E,KAAM,CAAAM,SAAS,CAAGL,YAAY,CAAG,GAAI,CAAAM,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAErD,GAAI,CAAAC,SAAS,CAAG,CAACH,SAAS,EAAIH,MAAM,CAACO,aAAa,CAACC,UAAU,CAE7D,QAAS,CAAAC,eAAeA,CAAA,CAAI,CAC1B,GAAIH,SAAS,CAAE,CACbhB,SAAS,CAACoB,SAAS,CAACC,GAAG,CAAC,GAAGxB,MAAM,SAAS,CAAC,CAC7C,CAAC,IAAM,CACLG,SAAS,CAACoB,SAAS,CAACE,MAAM,CAAC,GAAGzB,MAAM,SAAS,CAAC,CAChD,CACF,CACA,KAAM,CAAA0B,aAAa,CAAG,GAAG1B,MAAM,UAAU,CACzC,GAAI,CAAA2B,aAAa,CAEjB,KAAM,CAAAC,YAAY,CAAGA,CAACC,MAAM,CAAG,IAAI,GAAK,CACtCC,YAAY,CAACH,aAAa,CAAC,CAE3BA,aAAa,CAAGI,UAAU,CAAC,IAAM,CAC/B,GAAIF,MAAM,CAAE,CACVtB,QAAQ,CAACgB,SAAS,CAACC,GAAG,CAACE,aAAa,CAAC,CACrCjB,OAAO,CAACpB,KAAK,CAAC2C,OAAO,CAAG,MAAM,CAChC,CAAC,IAAM,CACLzB,QAAQ,CAACgB,SAAS,CAACE,MAAM,CAACC,aAAa,CAAC,CACxCjB,OAAO,CAACpB,KAAK,CAAC2C,OAAO,CAAG,MAAM,CAChC,CACF,CAAC,CAAE,EAAE,CAAC,CACR,CAAC,CAEDvB,OAAO,CAACwB,gBAAgB,CAAC,OAAO,CAAE,IAAM,CACtC,KAAM,CAAAC,WAAW,CAAG,GAAI,CAAAjB,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CAAG,CAAC,CAAG,EAAE,CAAG,EAAE,CAAG,IAAI,CAC7DL,MAAM,CAACC,YAAY,CAACqB,OAAO,CAACzB,UAAU,CAAEwB,WAAW,CAAG,EAAE,CAAC,CACzDf,SAAS,CAAG,KAAK,CACjBG,eAAe,CAAC,CAAC,CACnB,CAAC,CAAC,CACFb,OAAO,CAACwB,gBAAgB,CAAC,YAAY,CAAE,IAAML,YAAY,CAAC,CAAC,CAAC,CAC5DnB,OAAO,CAACwB,gBAAgB,CAAC,YAAY,CAAE,IAAML,YAAY,CAAC,KAAK,CAAC,CAAC,CACjErB,QAAQ,CAAC0B,gBAAgB,CAAC,YAAY,CAAE,IAAML,YAAY,CAAC,CAAC,CAAC,CAC7DrB,QAAQ,CAAC0B,gBAAgB,CAAC,YAAY,CAAE,IAAML,YAAY,CAAC,KAAK,CAAC,CAAC,CAElEQ,eAAM,CAACC,MAAM,CAACC,EAAE,CAAC,qBAAqB,CAAE,IAAM,CAC5CnB,SAAS,CAAGN,MAAM,CAAC0B,IAAI,CAACC,aAAa,CACrClB,eAAe,CAAC,CAAC,CACnB,CAAC,CAAC,CACFA,eAAe,CAAC,CAAC,CACnB,CAEA,QAAS,CAAAlB,eAAeA,CAAEJ,MAAM,CAAE,CAChC,KAAM,CAAAG,SAAS,CAAGjB,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC,CAC/CgB,SAAS,CAACf,EAAE,CAAG,GAAGY,MAAM,WAAW,CACnCG,SAAS,CAACsC,SAAS,CAAG;AACxB,kBAAkBzC,MAAM;AACxB;AACA;AACA;AACA,iBAAiBA,MAAM;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,CACD,MAAO,CAAAG,SAAS,CAClB,CAEA,QAAS,CAAAG,SAASA,CAAEN,MAAM,CAAE,CAC1B,KAAM,CAAAK,GAAG,CAAGnB,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC,CAC3CkB,GAAG,CAACqC,WAAW,CAAG;AACpB,OAAO1C,MAAM;AACb;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,MAAM;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,MAAM;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmBA,MAAM;AACzB;AACA;AACA,OAAOA,MAAM;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,MAAM;AACb;AACA;AACA;AACA;AACA,OAAOA,MAAM,eAAeA,MAAM;AAClC;AACA;AACA;AACA,OAAOA,MAAM,aAAaA,MAAM;AAChC;AACA;AACA;AACA;AACA;AACA,iBAAiBA,MAAM;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,CAED,MAAO,CAAAK,GAAG,CACZ","ignoreList":[]}