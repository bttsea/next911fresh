{"version":3,"names":["ChunkNamesPlugin","apply","compiler","hooks","compilation","tap","chunkTemplate","renderManifest","intercept","register","tapInfo","name","originalMethod","fn","result","options","filenameTemplate","chunk","outputOptions","hasEntryModule","filename","chunkFilename","exports","default"],"sources":["chunk-names-plugin.ts"],"sourcesContent":["import { Compiler } from 'webpack'\n// This plugin mirrors webpack 3 `filename` and `chunkfilename` behavior\n// This fixes https://github.com/webpack/webpack/issues/6598\n// This plugin is based on https://github.com/researchgate/webpack/commit/2f28947fa0c63ccbb18f39c0098bd791a2c37090\nexport default class ChunkNamesPlugin {\n  apply(compiler: Compiler) {\n    compiler.hooks.compilation.tap(\n      'NextJsChunkNamesPlugin',\n      (compilation: any) => {\n        compilation.chunkTemplate.hooks.renderManifest.intercept({\n          register(tapInfo: any) {\n            if (tapInfo.name === 'JavascriptModulesPlugin') {\n              const originalMethod = tapInfo.fn\n              tapInfo.fn = (result: any, options: any) => {\n                let filenameTemplate\n                const chunk = options.chunk\n                const outputOptions = options.outputOptions\n                if (chunk.filenameTemplate) {\n                  filenameTemplate = chunk.filenameTemplate\n                } else if (chunk.hasEntryModule()) {\n                  filenameTemplate = outputOptions.filename\n                } else {\n                  filenameTemplate = outputOptions.chunkFilename\n                }\n\n                options.chunk.filenameTemplate = filenameTemplate\n                return originalMethod(result, options)\n              }\n            }\n            return tapInfo\n          },\n        })\n      }\n    )\n  }\n}\n"],"mappings":"4DACA;AACA;AACA;AACe,KAAM,CAAAA,gBAAiB,CACpCC,KAAKA,CAACC,QAAkB,CAAE,CACxBA,QAAQ,CAACC,KAAK,CAACC,WAAW,CAACC,GAAG,CAC5B,wBAAwB,CACvBD,WAAgB,EAAK,CACpBA,WAAW,CAACE,aAAa,CAACH,KAAK,CAACI,cAAc,CAACC,SAAS,CAAC,CACvDC,QAAQA,CAACC,OAAY,CAAE,CACrB,GAAIA,OAAO,CAACC,IAAI,GAAK,yBAAyB,CAAE,CAC9C,KAAM,CAAAC,cAAc,CAAGF,OAAO,CAACG,EAAE,CACjCH,OAAO,CAACG,EAAE,CAAG,CAACC,MAAW,CAAEC,OAAY,GAAK,CAC1C,GAAI,CAAAC,gBAAgB,CACpB,KAAM,CAAAC,KAAK,CAAGF,OAAO,CAACE,KAAK,CAC3B,KAAM,CAAAC,aAAa,CAAGH,OAAO,CAACG,aAAa,CAC3C,GAAID,KAAK,CAACD,gBAAgB,CAAE,CAC1BA,gBAAgB,CAAGC,KAAK,CAACD,gBAAgB,CAC3C,CAAC,IAAM,IAAIC,KAAK,CAACE,cAAc,CAAC,CAAC,CAAE,CACjCH,gBAAgB,CAAGE,aAAa,CAACE,QAAQ,CAC3C,CAAC,IAAM,CACLJ,gBAAgB,CAAGE,aAAa,CAACG,aAAa,CAChD,CAEAN,OAAO,CAACE,KAAK,CAACD,gBAAgB,CAAGA,gBAAgB,CACjD,MAAO,CAAAJ,cAAc,CAACE,MAAM,CAAEC,OAAO,CAAC,CACxC,CAAC,CACH,CACA,MAAO,CAAAL,OAAO,CAChB,CACF,CAAC,CAAC,CACJ,CACF,CAAC,CACH,CACF,CAACY,OAAA,CAAAC,OAAA,CAAAvB,gBAAA","ignoreList":[]}