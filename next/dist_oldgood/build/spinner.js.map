{"version":3,"names":["_ora","_interopRequireDefault","require","e","__esModule","default","dotsSpinner","frames","interval","createSpinner","text","options","spinner","prefixText","process","stdout","isTTY","ora","undefined","stream","start","origLog","console","log","origWarn","warn","origError","error","origStop","stop","bind","origStopAndPersist","stopAndPersist","logHandle","method","args","resetLog"],"sources":["spinner.ts"],"sourcesContent":["import ora from 'ora'\n\nconst dotsSpinner = {\n  frames: ['.', '..', '...'],\n  interval: 200,\n}\n\nexport default function createSpinner(\n  text: string | { prefixText: string },\n  options: ora.Options = {}\n) {\n  let spinner: undefined | ora.Ora\n  let prefixText = text && typeof text === 'object' && text.prefixText\n\n  if (process.stdout.isTTY) {\n    spinner = ora({\n      text: typeof text === 'string' ? text : undefined,\n      prefixText: typeof prefixText === 'string' ? prefixText : undefined,\n      spinner: dotsSpinner,\n      stream: process.stdout,\n      ...options,\n    }).start()\n\n    const origLog = console.log\n    const origWarn = console.warn\n    const origError = console.error\n    const origStop = spinner.stop.bind(spinner)\n    const origStopAndPersist = spinner.stopAndPersist.bind(spinner)\n\n    const logHandle = (method: any, args: any[]) => {\n      origStop()\n      method(...args)\n      spinner!.start()\n    }\n\n    console.log = (...args: any) => logHandle(origLog, args)\n    console.warn = (...args: any) => logHandle(origWarn, args)\n    console.error = (...args: any) => logHandle(origError, args)\n\n    const resetLog = () => {\n      console.log = origLog\n    }\n    spinner.stop = (): ora.Ora => {\n      origStop()\n      resetLog()\n      return spinner!\n    }\n    spinner.stopAndPersist = (): ora.Ora => {\n      origStopAndPersist()\n      resetLog()\n      return spinner!\n    }\n  } else if (prefixText || text) {\n    console.log(prefixText ? prefixText + '...' : text)\n  }\n\n  return spinner\n}\n"],"mappings":"mEAAA,IAAAA,IAAA,CAAAC,sBAAA,CAAAC,OAAA,SAAqB,SAAAD,uBAAAE,CAAA,SAAAA,CAAA,EAAAA,CAAA,CAAAC,UAAA,CAAAD,CAAA,EAAAE,OAAA,CAAAF,CAAA,GAErB,KAAM,CAAAG,WAAW,CAAG,CAClBC,MAAM,CAAE,CAAC,GAAG,CAAE,IAAI,CAAE,KAAK,CAAC,CAC1BC,QAAQ,CAAE,GACZ,CAAC,CAEc,QAAS,CAAAC,aAAaA,CACnCC,IAAqC,CACrCC,OAAoB,CAAG,CAAC,CAAC,CACzB,CACA,GAAI,CAAAC,OAA4B,CAChC,GAAI,CAAAC,UAAU,CAAGH,IAAI,EAAI,MAAO,CAAAA,IAAI,GAAK,QAAQ,EAAIA,IAAI,CAACG,UAAU,CAEpE,GAAIC,OAAO,CAACC,MAAM,CAACC,KAAK,CAAE,CACxBJ,OAAO,CAAG,GAAAK,YAAG,EAAC,CACZP,IAAI,CAAE,MAAO,CAAAA,IAAI,GAAK,QAAQ,CAAGA,IAAI,CAAGQ,SAAS,CACjDL,UAAU,CAAE,MAAO,CAAAA,UAAU,GAAK,QAAQ,CAAGA,UAAU,CAAGK,SAAS,CACnEN,OAAO,CAAEN,WAAW,CACpBa,MAAM,CAAEL,OAAO,CAACC,MAAM,CACtB,GAAGJ,OACL,CAAC,CAAC,CAACS,KAAK,CAAC,CAAC,CAEV,KAAM,CAAAC,OAAO,CAAGC,OAAO,CAACC,GAAG,CAC3B,KAAM,CAAAC,QAAQ,CAAGF,OAAO,CAACG,IAAI,CAC7B,KAAM,CAAAC,SAAS,CAAGJ,OAAO,CAACK,KAAK,CAC/B,KAAM,CAAAC,QAAQ,CAAGhB,OAAO,CAACiB,IAAI,CAACC,IAAI,CAAClB,OAAO,CAAC,CAC3C,KAAM,CAAAmB,kBAAkB,CAAGnB,OAAO,CAACoB,cAAc,CAACF,IAAI,CAAClB,OAAO,CAAC,CAE/D,KAAM,CAAAqB,SAAS,CAAGA,CAACC,MAAW,CAAEC,IAAW,GAAK,CAC9CP,QAAQ,CAAC,CAAC,CACVM,MAAM,CAAC,GAAGC,IAAI,CAAC,CACfvB,OAAO,CAAEQ,KAAK,CAAC,CAAC,CAClB,CAAC,CAEDE,OAAO,CAACC,GAAG,CAAG,CAAC,GAAGY,IAAS,GAAKF,SAAS,CAACZ,OAAO,CAAEc,IAAI,CAAC,CACxDb,OAAO,CAACG,IAAI,CAAG,CAAC,GAAGU,IAAS,GAAKF,SAAS,CAACT,QAAQ,CAAEW,IAAI,CAAC,CAC1Db,OAAO,CAACK,KAAK,CAAG,CAAC,GAAGQ,IAAS,GAAKF,SAAS,CAACP,SAAS,CAAES,IAAI,CAAC,CAE5D,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrBd,OAAO,CAACC,GAAG,CAAGF,OAAO,CACvB,CAAC,CACDT,OAAO,CAACiB,IAAI,CAAG,IAAe,CAC5BD,QAAQ,CAAC,CAAC,CACVQ,QAAQ,CAAC,CAAC,CACV,MAAO,CAAAxB,OAAO,CAChB,CAAC,CACDA,OAAO,CAACoB,cAAc,CAAG,IAAe,CACtCD,kBAAkB,CAAC,CAAC,CACpBK,QAAQ,CAAC,CAAC,CACV,MAAO,CAAAxB,OAAO,CAChB,CAAC,CACH,CAAC,IAAM,IAAIC,UAAU,EAAIH,IAAI,CAAE,CAC7BY,OAAO,CAACC,GAAG,CAACV,UAAU,CAAGA,UAAU,CAAG,KAAK,CAAGH,IAAI,CAAC,CACrD,CAEA,MAAO,CAAAE,OAAO,CAChB","ignoreList":[]}