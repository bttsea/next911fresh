{"version":3,"names":["_pluginTransformModulesCommonjs","_interopRequireDefault","require","e","__esModule","default","NextToNextServer","args","commonjs","commonjsPlugin","visitor","Program","exit","path","state","foundModuleExports","traverse","MemberExpression","node","object","name","property","call"],"sources":["commonjs.ts"],"sourcesContent":["import { PluginObj } from '@babel/core'\nimport { NodePath } from '@babel/traverse'\nimport { Program } from '@babel/types'\nimport commonjsPlugin from '@babel/plugin-transform-modules-commonjs'\n// Rewrite imports using next/<something> to next-server/<something>\nexport default function NextToNextServer(...args: any): PluginObj {\n  const commonjs = commonjsPlugin(...args)\n  return {\n    visitor: {\n      Program: {\n        exit(path: NodePath<Program>, state) {\n          let foundModuleExports = false\n          path.traverse({\n            MemberExpression(path: any) {\n              if (path.node.object.name !== 'module') return\n              if (path.node.property.name !== 'exports') return\n              foundModuleExports = true\n            },\n          })\n\n          if (!foundModuleExports) {\n            return\n          }\n\n          commonjs.visitor.Program.exit.call(this, path, state)\n        },\n      },\n    },\n  }\n}\n"],"mappings":"sEAGA,IAAAA,+BAAA,CAAAC,sBAAA,CAAAC,OAAA,8CAAqE,SAAAD,uBAAAE,CAAA,SAAAA,CAAA,EAAAA,CAAA,CAAAC,UAAA,CAAAD,CAAA,EAAAE,OAAA,CAAAF,CAAA,GACrE;AACe,QAAS,CAAAG,gBAAgBA,CAAC,GAAGC,IAAS,CAAa,CAChE,KAAM,CAAAC,QAAQ,CAAG,GAAAC,uCAAc,EAAC,GAAGF,IAAI,CAAC,CACxC,MAAO,CACLG,OAAO,CAAE,CACPC,OAAO,CAAE,CACPC,IAAIA,CAACC,IAAuB,CAAEC,KAAK,CAAE,CACnC,GAAI,CAAAC,kBAAkB,CAAG,KAAK,CAC9BF,IAAI,CAACG,QAAQ,CAAC,CACZC,gBAAgBA,CAACJ,IAAS,CAAE,CAC1B,GAAIA,IAAI,CAACK,IAAI,CAACC,MAAM,CAACC,IAAI,GAAK,QAAQ,CAAE,OACxC,GAAIP,IAAI,CAACK,IAAI,CAACG,QAAQ,CAACD,IAAI,GAAK,SAAS,CAAE,OAC3CL,kBAAkB,CAAG,IAAI,CAC3B,CACF,CAAC,CAAC,CAEF,GAAI,CAACA,kBAAkB,CAAE,CACvB,OACF,CAEAP,QAAQ,CAACE,OAAO,CAACC,OAAO,CAACC,IAAI,CAACU,IAAI,CAAC,IAAI,CAAET,IAAI,CAAEC,KAAK,CAAC,CACvD,CACF,CACF,CACF,CAAC,CACH","ignoreList":[]}