{"version":3,"names":["_index","_interopRequireDefault","require","e","__esModule","default","_interopRequireWildcard","t","WeakMap","r","n","o","i","f","__proto__","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","forEach","dependency","resolve","err","console","warn","defaultCommand","commands","build","Promise","then","nextBuild","start","nextStart","export","nextExport","dev","nextDev","telemetry","nextTelemetry","args","arg","Boolean","permissive","log","process","env","__NEXT_VERSION","exit","foundCommand","_","keys","join","command","forwardedArgs","slice","Error","push","defaultEnv","NODE_ENV","React","Suspense","exec","CONFIG_FILE","watchFile","cwd","cur","prev","size"],"sources":["next.ts"],"sourcesContent":["#!/usr/bin/env node\nimport arg from 'next/dist/compiled/arg/index.js'\n;['react', 'react-dom'].forEach(dependency => {\n  try {\n    // When 'npm link' is used it checks the clone location. Not the project.\n    require.resolve(dependency)\n  } catch (err) {\n    // tslint:disable-next-line\n    console.warn(\n      `The module '${dependency}' was not found. Next.js requires that you include it in 'dependencies' of your 'package.json'. To add it, run 'npm install --save ${dependency}'`\n    )\n  }\n})\n\nconst defaultCommand = 'dev'\nexport type cliCommand = (argv?: string[]) => void\nconst commands: { [command: string]: () => Promise<cliCommand> } = {\n  build: async () => await import('../cli/next-build').then(i => i.nextBuild),\n  start: async () => await import('../cli/next-start').then(i => i.nextStart),\n  export: async () =>\n    await import('../cli/next-export').then(i => i.nextExport),\n  dev: async () => await import('../cli/next-dev').then(i => i.nextDev),\n  telemetry: async () =>\n    await import('../cli/next-telemetry').then(i => i.nextTelemetry),\n}\n\nconst args = arg(\n  {\n    // Types\n    '--version': Boolean,\n    '--help': Boolean,\n    '--inspect': Boolean,\n\n    // Aliases\n    '-v': '--version',\n    '-h': '--help',\n  },\n  {\n    permissive: true,\n  }\n)\n\n// Version is inlined into the file using taskr build pipeline\nif (args['--version']) {\n  // tslint:disable-next-line\n  console.log(`Next.js v${process.env.__NEXT_VERSION}`)\n  process.exit(0)\n}\n\n// Check if we are running `next <subcommand>` or `next`\nconst foundCommand = Boolean(commands[args._[0]])\n\n// Makes sure the `next <subcommand> --help` case is covered\n// This help message is only showed for `next --help`\nif (!foundCommand && args['--help']) {\n  // tslint:disable-next-line\n  console.log(`\n    Usage\n      $ next <command>\n\n    Available commands\n      ${Object.keys(commands).join(', ')}\n\n    Options\n      --version, -v   Version number\n      --inspect       Enable the Node.js inspector\n      --help, -h      Displays this message\n\n    For more information run a command with the --help flag\n      $ next build --help\n  `)\n  process.exit(0)\n}\n\nconst command = foundCommand ? args._[0] : defaultCommand\nconst forwardedArgs = foundCommand ? args._.slice(1) : args._\n\nif (args['--inspect'])\n  throw new Error(\n    `Use env variable NODE_OPTIONS instead: NODE_OPTIONS=\"--inspect\" next ${command}`\n  )\n\n// Make sure the `next <subcommand> --help` case is covered\nif (args['--help']) {\n  forwardedArgs.push('--help')\n}\n\nconst defaultEnv = command === 'dev' ? 'development' : 'production'\n;(process.env as any).NODE_ENV = process.env.NODE_ENV || defaultEnv\n\n// this needs to come after we set the correct NODE_ENV or\n// else it might cause SSR to break\nconst React = require('react')\n\nif (typeof React.Suspense === 'undefined') {\n  throw new Error(\n    `The version of React you are using is lower than the minimum required version needed for Next.js. Please upgrade \"react\" and \"react-dom\": \"npm install --save react react-dom\" https://err.sh/zeit/next.js/invalid-react-version`\n  )\n}\n\ncommands[command]().then(exec => exec(forwardedArgs))\n\nif (command === 'dev') {\n  const { CONFIG_FILE } = require('../next-server/lib/constants')\n  const { watchFile } = require('fs')\n  watchFile(`${process.cwd()}/${CONFIG_FILE}`, (cur: any, prev: any) => {\n    if (cur.size > 0 || prev.size > 0) {\n      // tslint:disable-next-line\n      console.log(\n        `\\n> Found a change in ${CONFIG_FILE}. Restart the server to see the changes in effect.`\n      )\n    }\n  })\n}\n"],"mappings":"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","ignoreList":[]}