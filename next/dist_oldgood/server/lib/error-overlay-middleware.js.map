{"version":3,"names":["_url","_interopRequireDefault","require","_launchEditor","_fs","_path","e","__esModule","default","errorOverlayMiddleware","options","req","res","next","url","startsWith","query","parse","lineNumber","parseInt","colNumber","resolvedFileName","fileName","fs","existsSync","path","join","dir","launchEditor","end"],"sources":["error-overlay-middleware.ts"],"sourcesContent":["import url from 'url'\nimport launchEditor from 'launch-editor'\nimport fs from 'fs'\nimport path from 'path'\nimport { IncomingMessage, ServerResponse } from 'http'\n\nexport default function errorOverlayMiddleware(options: { dir: string }) {\n  return (req: IncomingMessage, res: ServerResponse, next: Function) => {\n    if (req.url!.startsWith('/_next/development/open-stack-frame-in-editor')) {\n      const query = url.parse(req.url!, true).query\n      const lineNumber = parseInt(query.lineNumber as string, 10) || 1\n      const colNumber = parseInt(query.colNumber as string, 10) || 1\n\n      let resolvedFileName = query.fileName\n\n      if (!fs.existsSync(resolvedFileName as string)) {\n        resolvedFileName = path.join(options.dir, resolvedFileName as string)\n      }\n\n      launchEditor(`${resolvedFileName}:${lineNumber}:${colNumber}`)\n      res.end()\n    } else {\n      next()\n    }\n  }\n}\n"],"mappings":"4EAAA,IAAAA,IAAA,CAAAC,sBAAA,CAAAC,OAAA,SACA,IAAAC,aAAA,CAAAF,sBAAA,CAAAC,OAAA,mBACA,IAAAE,GAAA,CAAAH,sBAAA,CAAAC,OAAA,QACA,IAAAG,KAAA,CAAAJ,sBAAA,CAAAC,OAAA,UAAuB,SAAAD,uBAAAK,CAAA,SAAAA,CAAA,EAAAA,CAAA,CAAAC,UAAA,CAAAD,CAAA,EAAAE,OAAA,CAAAF,CAAA,GAGR,QAAS,CAAAG,sBAAsBA,CAACC,OAAwB,CAAE,CACvE,MAAO,CAACC,GAAoB,CAAEC,GAAmB,CAAEC,IAAc,GAAK,CACpE,GAAIF,GAAG,CAACG,GAAG,CAAEC,UAAU,CAAC,+CAA+C,CAAC,CAAE,CACxE,KAAM,CAAAC,KAAK,CAAGF,YAAG,CAACG,KAAK,CAACN,GAAG,CAACG,GAAG,CAAG,IAAI,CAAC,CAACE,KAAK,CAC7C,KAAM,CAAAE,UAAU,CAAGC,QAAQ,CAACH,KAAK,CAACE,UAAU,CAAY,EAAE,CAAC,EAAI,CAAC,CAChE,KAAM,CAAAE,SAAS,CAAGD,QAAQ,CAACH,KAAK,CAACI,SAAS,CAAY,EAAE,CAAC,EAAI,CAAC,CAE9D,GAAI,CAAAC,gBAAgB,CAAGL,KAAK,CAACM,QAAQ,CAErC,GAAI,CAACC,WAAE,CAACC,UAAU,CAACH,gBAA0B,CAAC,CAAE,CAC9CA,gBAAgB,CAAGI,aAAI,CAACC,IAAI,CAAChB,OAAO,CAACiB,GAAG,CAAEN,gBAA0B,CAAC,CACvE,CAEA,GAAAO,qBAAY,EAAC,GAAGP,gBAAgB,IAAIH,UAAU,IAAIE,SAAS,EAAE,CAAC,CAC9DR,GAAG,CAACiB,GAAG,CAAC,CAAC,CACX,CAAC,IAAM,CACLhB,IAAI,CAAC,CAAC,CACR,CACF,CAAC,CACH","ignoreList":[]}