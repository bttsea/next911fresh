{"version":3,"names":["_path","require","_chalk","_interopRequireDefault","_isWriteable","_log","e","__esModule","default","findPageFile","rootDir","normalizedPagePath","pageExtensions","foundPagePaths","extension","relativePagePath","pagePath","join","isWriteable","push","relativePagePathWithIndex","pagePathWithIndex","length","warn","chalk","cyan"],"sources":["find-page-file.ts"],"sourcesContent":["import { join } from 'path'\nimport chalk from 'chalk'\nimport { isWriteable } from '../../build/is-writeable'\nimport { warn } from '../../build/output/log'\n\nexport async function findPageFile(\n  rootDir: string,\n  normalizedPagePath: string,\n  pageExtensions: string[]\n): Promise<string | null> {\n  let foundPagePaths: string[] = []\n\n  for (const extension of pageExtensions) {\n    const relativePagePath = `${normalizedPagePath}.${extension}`\n    const pagePath = join(rootDir, relativePagePath)\n\n    if (await isWriteable(pagePath)) {\n      foundPagePaths.push(relativePagePath)\n    }\n\n    const relativePagePathWithIndex = join(\n      normalizedPagePath,\n      `index.${extension}`\n    )\n    const pagePathWithIndex = join(rootDir, relativePagePathWithIndex)\n    if (await isWriteable(pagePathWithIndex)) {\n      foundPagePaths.push(relativePagePathWithIndex)\n    }\n  }\n\n  if (foundPagePaths.length < 1) {\n    return null\n  }\n\n  if (foundPagePaths.length > 1) {\n    warn(\n      `Duplicate page detected. ${chalk.cyan(\n        join('pages', foundPagePaths[0])\n      )} and ${chalk.cyan(\n        join('pages', foundPagePaths[1])\n      )} both resolve to ${chalk.cyan(normalizedPagePath)}.`\n    )\n  }\n\n  return foundPagePaths[0]\n}\n"],"mappings":"uEAAA,IAAAA,KAAA,CAAAC,OAAA,SACA,IAAAC,MAAA,CAAAC,sBAAA,CAAAF,OAAA,WACA,IAAAG,YAAA,CAAAH,OAAA,6BACA,IAAAI,IAAA,CAAAJ,OAAA,2BAA6C,SAAAE,uBAAAG,CAAA,SAAAA,CAAA,EAAAA,CAAA,CAAAC,UAAA,CAAAD,CAAA,EAAAE,OAAA,CAAAF,CAAA,GAEtC,cAAe,CAAAG,YAAYA,CAChCC,OAAe,CACfC,kBAA0B,CAC1BC,cAAwB,CACA,CACxB,GAAI,CAAAC,cAAwB,CAAG,EAAE,CAEjC,IAAK,KAAM,CAAAC,SAAS,GAAI,CAAAF,cAAc,CAAE,CACtC,KAAM,CAAAG,gBAAgB,CAAG,GAAGJ,kBAAkB,IAAIG,SAAS,EAAE,CAC7D,KAAM,CAAAE,QAAQ,CAAG,GAAAC,UAAI,EAACP,OAAO,CAAEK,gBAAgB,CAAC,CAEhD,GAAI,KAAM,GAAAG,wBAAW,EAACF,QAAQ,CAAC,CAAE,CAC/BH,cAAc,CAACM,IAAI,CAACJ,gBAAgB,CAAC,CACvC,CAEA,KAAM,CAAAK,yBAAyB,CAAG,GAAAH,UAAI,EACpCN,kBAAkB,CAClB,SAASG,SAAS,EACpB,CAAC,CACD,KAAM,CAAAO,iBAAiB,CAAG,GAAAJ,UAAI,EAACP,OAAO,CAAEU,yBAAyB,CAAC,CAClE,GAAI,KAAM,GAAAF,wBAAW,EAACG,iBAAiB,CAAC,CAAE,CACxCR,cAAc,CAACM,IAAI,CAACC,yBAAyB,CAAC,CAChD,CACF,CAEA,GAAIP,cAAc,CAACS,MAAM,CAAG,CAAC,CAAE,CAC7B,MAAO,KAAI,CACb,CAEA,GAAIT,cAAc,CAACS,MAAM,CAAG,CAAC,CAAE,CAC7B,GAAAC,SAAI,EACF,4BAA4BC,cAAK,CAACC,IAAI,CACpC,GAAAR,UAAI,EAAC,OAAO,CAAEJ,cAAc,CAAC,CAAC,CAAC,CACjC,CAAC,QAAQW,cAAK,CAACC,IAAI,CACjB,GAAAR,UAAI,EAAC,OAAO,CAAEJ,cAAc,CAAC,CAAC,CAAC,CACjC,CAAC,oBAAoBW,cAAK,CAACC,IAAI,CAACd,kBAAkB,CAAC,GACrD,CAAC,CACH,CAEA,MAAO,CAAAE,cAAc,CAAC,CAAC,CAAC,CAC1B","ignoreList":[]}