{"version":3,"names":["_fs","_interopRequireDefault","require","_path","_util","_webpack","_webpackDevMiddleware","_webpackHotMiddleware","_entries","_output","_webpackConfig","_constants","_fileExists","_recursiveDelete","_constants2","_router","_errorOverlayMiddleware","_findPageFile","_onDemandEntryHandler","_interopRequireWildcard","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","access","promisify","fs","readFile","renderScriptError","res","error","setHeader","code","message","statusCode","end","console","stack","addCorsSupport","req","headers","origin","preflight","method","writeHead","matchNextPageBundleRequest","route","findEntryModule","issuer","erroredPages","compilation","options","enhanceName","name","failedPages","errors","entryModule","IS_BUNDLED_PAGE_REGEX","test","enhancedName","push","HotReloader","constructor","dir","config","pagesDir","buildId","middlewares","webpackDevMiddleware","webpackHotMiddleware","initialized","stats","serverPrevDocumentHash","prevChunkNames","onDemandEntries","send","action","args","publish","data","run","parsedUrl","handlePageBundleRequest","pathname","params","page","path","join","BLOCKED_PAGES","indexOf","ensurePage","finished","bundlePath","distDir","includes","_","getCompilationErrors","length","fn","Promise","resolve","reject","err","clean","recursiveDelete","getWebpackConfig","pagePaths","all","findPageFile","pageExtensions","pages","createPagesMapping","filter","entrypoints","createEntrypoints","additionalClientEntrypoints","CLIENT_STATIC_FILES_RUNTIME_AMP","sep","relativePath","NEXT_PROJECT_ROOT_DIST_CLIENT","getBaseWebpackConfig","dev","isServer","client","server","start","configs","multiCompiler","webpack","buildTools","prepareBuildTools","assignBuildTools","waitUntilValid","stop","middleware","close","reload","compiler","oldWebpackDevMiddleware","errorOverlayMiddleware","tsConfigPath","useTypeScript","fileExists","watchCompilers","compilers","warnings","hooks","done","tap","documentChunk","chunks","find","c","normalize","warn","hash","chunkNames","Set","map","addedPages","diff","removedPages","size","addedPage","ROUTE_NAME_REGEX","exec","replace","removedPage","ignored","webpackDevMiddlewareConfig","publicPath","noInfo","logLevel","watchOptions","writeToDisk","log","configOrigin","WebpackDevMiddleware","WebpackHotMiddleware","heartbeat","onDemandEntryHandler","bind","publicRuntimeConfig","serverRuntimeConfig","normalizedPage","normalizePage","waitUntilReloaded","hasErrors","exports","a","b","v"],"sources":["hot-reloader.ts"],"sourcesContent":["import fs from 'fs'\nimport { IncomingMessage, ServerResponse } from 'http'\nimport { join, normalize, relative as relativePath, sep } from 'path'\nimport { promisify } from 'util'\nimport webpack from 'webpack'\nimport WebpackDevMiddleware from 'webpack-dev-middleware'\nimport WebpackHotMiddleware from 'webpack-hot-middleware'\n\nimport { createEntrypoints, createPagesMapping } from '../build/entries'\nimport { watchCompilers } from '../build/output'\nimport getBaseWebpackConfig from '../build/webpack-config'\nimport { NEXT_PROJECT_ROOT_DIST_CLIENT } from '../lib/constants'\nimport { fileExists } from '../lib/file-exists'\nimport { recursiveDelete } from '../lib/recursive-delete'\nimport {\n  BLOCKED_PAGES,\n  CLIENT_STATIC_FILES_RUNTIME_AMP,\n  IS_BUNDLED_PAGE_REGEX,\n  ROUTE_NAME_REGEX,\n} from '../next-server/lib/constants'\nimport { route } from '../next-server/server/router'\nimport errorOverlayMiddleware from './lib/error-overlay-middleware'\nimport { findPageFile } from './lib/find-page-file'\nimport onDemandEntryHandler, { normalizePage } from './on-demand-entry-handler'\nimport { NextHandleFunction } from 'connect'\nimport { UrlObject } from 'url'\n\nconst access = promisify(fs.access)\nconst readFile = promisify(fs.readFile)\n\nexport async function renderScriptError(res: ServerResponse, error: Error) {\n  // Asks CDNs and others to not to cache the errored page\n  res.setHeader(\n    'Cache-Control',\n    'no-cache, no-store, max-age=0, must-revalidate'\n  )\n\n  if (\n    (error as any).code === 'ENOENT' ||\n    error.message === 'INVALID_BUILD_ID'\n  ) {\n    res.statusCode = 404\n    res.end('404 - Not Found')\n    return\n  }\n\n  console.error(error.stack)\n  res.statusCode = 500\n  res.end('500 - Internal Error')\n}\n\nfunction addCorsSupport(req: IncomingMessage, res: ServerResponse) {\n  if (!req.headers.origin) {\n    return { preflight: false }\n  }\n\n  res.setHeader('Access-Control-Allow-Origin', req.headers.origin)\n  res.setHeader('Access-Control-Allow-Methods', 'OPTIONS, GET')\n  // Based on https://github.com/primus/access-control/blob/4cf1bc0e54b086c91e6aa44fb14966fa5ef7549c/index.js#L158\n  if (req.headers['access-control-request-headers']) {\n    res.setHeader('Access-Control-Allow-Headers', req.headers[\n      'access-control-request-headers'\n    ] as string)\n  }\n\n  if (req.method === 'OPTIONS') {\n    res.writeHead(200)\n    res.end()\n    return { preflight: true }\n  }\n\n  return { preflight: false }\n}\n\nconst matchNextPageBundleRequest = route(\n  '/_next/static/:buildId/pages/:path*.js(.map)?'\n)\n\n// Recursively look up the issuer till it ends up at the root\nfunction findEntryModule(issuer: any): any {\n  if (issuer.issuer) {\n    return findEntryModule(issuer.issuer)\n  }\n\n  return issuer\n}\n\nfunction erroredPages(\n  compilation: webpack.compilation.Compilation,\n  options = { enhanceName: (name: string) => name }\n) {\n  const failedPages: { [page: string]: any[] } = {}\n  for (const error of compilation.errors) {\n    if (!error.origin) {\n      continue\n    }\n\n    const entryModule = findEntryModule(error.origin)\n    const { name } = entryModule\n    if (!name) {\n      continue\n    }\n\n    // Only pages have to be reloaded\n    if (!IS_BUNDLED_PAGE_REGEX.test(name)) {\n      continue\n    }\n\n    const enhancedName = options.enhanceName(name)\n\n    if (!failedPages[enhancedName]) {\n      failedPages[enhancedName] = []\n    }\n\n    failedPages[enhancedName].push(error)\n  }\n\n  return failedPages\n}\n\nexport default class HotReloader {\n  private dir: string\n  private buildId: string\n  private middlewares: any[]\n  private pagesDir: string\n  private webpackDevMiddleware: WebpackDevMiddleware.WebpackDevMiddleware | null\n  private webpackHotMiddleware:\n    | (NextHandleFunction & WebpackHotMiddleware.EventStream)\n    | null\n  private initialized: boolean\n  private config: any\n  private stats: any\n  private serverPrevDocumentHash: string | null\n  private prevChunkNames?: Set<any>\n  private onDemandEntries: any\n\n  constructor(\n    dir: string,\n    {\n      config,\n      pagesDir,\n      buildId,\n    }: { config: object; pagesDir: string; buildId: string }\n  ) {\n    this.buildId = buildId\n    this.dir = dir\n    this.middlewares = []\n    this.pagesDir = pagesDir\n    this.webpackDevMiddleware = null\n    this.webpackHotMiddleware = null\n    this.initialized = false\n    this.stats = null\n    this.serverPrevDocumentHash = null\n\n    this.config = config\n  }\n\n  async run(req: IncomingMessage, res: ServerResponse, parsedUrl: UrlObject) {\n    // Usually CORS support is not needed for the hot-reloader (this is dev only feature)\n    // With when the app runs for multi-zones support behind a proxy,\n    // the current page is trying to access this URL via assetPrefix.\n    // That's when the CORS support is needed.\n    const { preflight } = addCorsSupport(req, res)\n    if (preflight) {\n      return\n    }\n\n    // When a request comes in that is a page bundle, e.g. /_next/static/<buildid>/pages/index.js\n    // we have to compile the page using on-demand-entries, this middleware will handle doing that\n    // by adding the page to on-demand-entries, waiting till it's done\n    // and then the bundle will be served like usual by the actual route in server/index.js\n    const handlePageBundleRequest = async (\n      res: ServerResponse,\n      parsedUrl: UrlObject\n    ) => {\n      const { pathname } = parsedUrl\n      const params = matchNextPageBundleRequest(pathname)\n      if (!params) {\n        return {}\n      }\n\n      if (params.buildId !== this.buildId) {\n        return\n      }\n\n      const page = `/${params.path.join('/')}`\n      if (page === '/_error' || BLOCKED_PAGES.indexOf(page) === -1) {\n        try {\n          await this.ensurePage(page)\n        } catch (error) {\n          await renderScriptError(res, error)\n          return { finished: true }\n        }\n\n        const bundlePath = join(\n          this.dir,\n          this.config.distDir,\n          'static/development/pages',\n          page + '.js'\n        )\n\n        // make sure to 404 for AMP bundles in case they weren't removed\n        try {\n          await access(bundlePath)\n          const data = await readFile(bundlePath, 'utf8')\n          if (data.includes('__NEXT_DROP_CLIENT_FILE__')) {\n            res.statusCode = 404\n            res.end()\n            return { finished: true }\n          }\n        } catch (_) {}\n\n        const errors = await this.getCompilationErrors(page)\n        if (errors.length > 0) {\n          await renderScriptError(res, errors[0])\n          return { finished: true }\n        }\n      }\n\n      return {}\n    }\n\n    const { finished } = (await handlePageBundleRequest(res, parsedUrl)) as any\n\n    for (const fn of this.middlewares) {\n      await new Promise((resolve, reject) => {\n        fn(req, res, (err: Error) => {\n          if (err) return reject(err)\n          resolve()\n        })\n      })\n    }\n\n    return { finished }\n  }\n\n  async clean() {\n    return recursiveDelete(join(this.dir, this.config.distDir))\n  }\n\n  async getWebpackConfig() {\n    const pagePaths = await Promise.all([\n      findPageFile(this.pagesDir, '/_app', this.config.pageExtensions),\n      findPageFile(this.pagesDir, '/_document', this.config.pageExtensions),\n    ])\n\n    const pages = createPagesMapping(\n      pagePaths.filter(i => i !== null) as string[],\n      this.config.pageExtensions\n    )\n    const entrypoints = createEntrypoints(\n      pages,\n      'server',\n      this.buildId,\n      this.config\n    )\n\n    let additionalClientEntrypoints: { [file: string]: string } = {}\n    additionalClientEntrypoints[CLIENT_STATIC_FILES_RUNTIME_AMP] =\n      `.${sep}` +\n      relativePath(\n        this.dir,\n        join(NEXT_PROJECT_ROOT_DIST_CLIENT, 'dev', 'amp-dev')\n      )\n\n    return Promise.all([\n      getBaseWebpackConfig(this.dir, {\n        dev: true,\n        isServer: false,\n        config: this.config,\n        buildId: this.buildId,\n        pagesDir: this.pagesDir,\n        entrypoints: { ...entrypoints.client, ...additionalClientEntrypoints },\n      }),\n      getBaseWebpackConfig(this.dir, {\n        dev: true,\n        isServer: true,\n        config: this.config,\n        buildId: this.buildId,\n        pagesDir: this.pagesDir,\n        entrypoints: entrypoints.server,\n      }),\n    ])\n  }\n\n  async start() {\n    await this.clean()\n\n    const configs = await this.getWebpackConfig()\n\n    const multiCompiler = webpack(configs)\n\n    const buildTools = await this.prepareBuildTools(multiCompiler)\n    this.assignBuildTools(buildTools)\n\n    this.stats = ((await this.waitUntilValid()) as any).stats[0]\n  }\n\n  async stop(webpackDevMiddleware?: WebpackDevMiddleware.WebpackDevMiddleware) {\n    const middleware = webpackDevMiddleware || this.webpackDevMiddleware\n    if (middleware) {\n      return new Promise((resolve, reject) => {\n        ;(middleware.close as any)((err: any) => {\n          if (err) return reject(err)\n          resolve()\n        })\n      })\n    }\n  }\n\n  async reload() {\n    this.stats = null\n\n    await this.clean()\n\n    const configs = await this.getWebpackConfig()\n    const compiler = webpack(configs)\n\n    const buildTools = await this.prepareBuildTools(compiler)\n    this.stats = await this.waitUntilValid(buildTools.webpackDevMiddleware)\n\n    const oldWebpackDevMiddleware = this.webpackDevMiddleware\n\n    this.assignBuildTools(buildTools)\n    await this.stop(oldWebpackDevMiddleware!)\n  }\n\n  assignBuildTools({\n    webpackDevMiddleware,\n    webpackHotMiddleware,\n    onDemandEntries,\n  }: {\n    webpackDevMiddleware: WebpackDevMiddleware.WebpackDevMiddleware\n    webpackHotMiddleware: NextHandleFunction & WebpackHotMiddleware.EventStream\n    onDemandEntries: any\n  }) {\n    this.webpackDevMiddleware = webpackDevMiddleware\n    this.webpackHotMiddleware = webpackHotMiddleware\n    this.onDemandEntries = onDemandEntries\n    this.middlewares = [\n      webpackDevMiddleware,\n      // must come before hotMiddleware\n      onDemandEntries.middleware(),\n      webpackHotMiddleware,\n      errorOverlayMiddleware({ dir: this.dir }),\n    ]\n  }\n\n  async prepareBuildTools(multiCompiler: webpack.MultiCompiler) {\n    const tsConfigPath = join(this.dir, 'tsconfig.json')\n    const useTypeScript = await fileExists(tsConfigPath)\n\n    watchCompilers(\n      multiCompiler.compilers[0],\n      multiCompiler.compilers[1],\n      useTypeScript,\n      ({ errors, warnings }) => this.send('typeChecked', { errors, warnings })\n    )\n\n    // This plugin watches for changes to _document.js and notifies the client side that it should reload the page\n    multiCompiler.compilers[1].hooks.done.tap(\n      'NextjsHotReloaderForServer',\n      stats => {\n        if (!this.initialized) {\n          return\n        }\n\n        const { compilation } = stats\n\n        // We only watch `_document` for changes on the server compilation\n        // the rest of the files will be triggered by the client compilation\n        const documentChunk = compilation.chunks.find(\n          c => c.name === normalize(`static/${this.buildId}/pages/_document.js`)\n        )\n        // If the document chunk can't be found we do nothing\n        if (!documentChunk) {\n          console.warn('_document.js chunk not found')\n          return\n        }\n\n        // Initial value\n        if (this.serverPrevDocumentHash === null) {\n          this.serverPrevDocumentHash = documentChunk.hash\n          return\n        }\n\n        // If _document.js didn't change we don't trigger a reload\n        if (documentChunk.hash === this.serverPrevDocumentHash) {\n          return\n        }\n\n        // Notify reload to reload the page, as _document.js was changed (different hash)\n        this.send('reloadPage')\n        this.serverPrevDocumentHash = documentChunk.hash\n      }\n    )\n\n    multiCompiler.compilers[0].hooks.done.tap(\n      'NextjsHotReloaderForClient',\n      stats => {\n        const { compilation } = stats\n        const chunkNames = new Set(\n          compilation.chunks\n            .map(c => c.name)\n            .filter(name => IS_BUNDLED_PAGE_REGEX.test(name))\n        )\n\n        if (this.initialized) {\n          // detect chunks which have to be replaced with a new template\n          // e.g, pages/index.js <-> pages/_error.js\n          const addedPages = diff(chunkNames, this.prevChunkNames!)\n          const removedPages = diff(this.prevChunkNames!, chunkNames)\n\n          if (addedPages.size > 0) {\n            for (const addedPage of addedPages) {\n              let page =\n                '/' + ROUTE_NAME_REGEX.exec(addedPage)![1].replace(/\\\\/g, '/')\n              page = page === '/index' ? '/' : page\n              this.send('addedPage', page)\n            }\n          }\n\n          if (removedPages.size > 0) {\n            for (const removedPage of removedPages) {\n              let page =\n                '/' + ROUTE_NAME_REGEX.exec(removedPage)![1].replace(/\\\\/g, '/')\n              page = page === '/index' ? '/' : page\n              this.send('removedPage', page)\n            }\n          }\n        }\n\n        this.initialized = true\n        this.stats = stats\n        this.prevChunkNames = chunkNames\n      }\n    )\n\n    // We donâ€™t watch .git/ .next/ and node_modules for changes\n    const ignored = [\n      /[\\\\/]\\.git[\\\\/]/,\n      /[\\\\/]\\.next[\\\\/]/,\n      /[\\\\/]node_modules[\\\\/]/,\n    ]\n\n    let webpackDevMiddlewareConfig = {\n      publicPath: `/_next/static/webpack`,\n      noInfo: true,\n      logLevel: 'silent',\n      watchOptions: { ignored },\n      writeToDisk: true,\n    }\n\n    if (this.config.webpackDevMiddleware) {\n      console.log(\n        `> Using \"webpackDevMiddleware\" config function defined in ${\n          this.config.configOrigin\n        }.`\n      )\n      webpackDevMiddlewareConfig = this.config.webpackDevMiddleware(\n        webpackDevMiddlewareConfig\n      )\n    }\n\n    const webpackDevMiddleware = WebpackDevMiddleware(\n      multiCompiler,\n      webpackDevMiddlewareConfig\n    )\n\n    const webpackHotMiddleware = WebpackHotMiddleware(\n      multiCompiler.compilers[0],\n      {\n        path: '/_next/webpack-hmr',\n        log: false,\n        heartbeat: 2500,\n      }\n    )\n\n    const onDemandEntries = onDemandEntryHandler(\n      webpackDevMiddleware,\n      multiCompiler,\n      {\n        dir: this.dir,\n        buildId: this.buildId,\n        pagesDir: this.pagesDir,\n        distDir: this.config.distDir,\n        reload: this.reload.bind(this),\n        pageExtensions: this.config.pageExtensions,\n        publicRuntimeConfig: this.config.publicRuntimeConfig,\n        serverRuntimeConfig: this.config.serverRuntimeConfig,\n        ...this.config.onDemandEntries,\n      }\n    )\n\n    return {\n      webpackDevMiddleware,\n      webpackHotMiddleware,\n      onDemandEntries,\n    }\n  }\n\n  waitUntilValid(\n    webpackDevMiddleware?: WebpackDevMiddleware.WebpackDevMiddleware\n  ) {\n    const middleware = webpackDevMiddleware || this.webpackDevMiddleware\n    return new Promise(resolve => {\n      middleware!.waitUntilValid(resolve)\n    })\n  }\n\n  async getCompilationErrors(page: string) {\n    const normalizedPage = normalizePage(page)\n    // When we are reloading, we need to wait until it's reloaded properly.\n    await this.onDemandEntries.waitUntilReloaded()\n\n    if (this.stats.hasErrors()) {\n      const { compilation } = this.stats\n      const failedPages = erroredPages(compilation, {\n        enhanceName(name) {\n          return '/' + ROUTE_NAME_REGEX.exec(name)![1]\n        },\n      })\n\n      // If there is an error related to the requesting page we display it instead of the first error\n      if (\n        failedPages[normalizedPage] &&\n        failedPages[normalizedPage].length > 0\n      ) {\n        return failedPages[normalizedPage]\n      }\n\n      // If none were found we still have to show the other errors\n      return this.stats.compilation.errors\n    }\n\n    return []\n  }\n\n  send = (action: string, ...args: any[]) => {\n    this.webpackHotMiddleware!.publish({ action, data: args })\n  }\n\n  async ensurePage(page: string) {\n    // Make sure we don't re-build or dispose prebuilt pages\n    if (page !== '/_error' && BLOCKED_PAGES.indexOf(page) !== -1) {\n      return\n    }\n    return this.onDemandEntries.ensurePage(page)\n  }\n}\n\nfunction diff(a: Set<any>, b: Set<any>) {\n  return new Set([...a].filter(v => !b.has(v)))\n}\n"],"mappings":"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","ignoreList":[]}