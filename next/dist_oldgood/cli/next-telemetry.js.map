{"version":3,"names":["exports","__esModule","nextTelemetry","_chalk","_interopRequireDefault","require","_index","_storage","e","default","argv","args","arg","Boolean","console","log","chalk","cyan","isEnabled","isTelemetryEnabled","_","setTelemetryEnabled","yellow","bold","green","red"],"sources":["next-telemetry.ts"],"sourcesContent":["#!/usr/bin/env node\nimport chalk from 'chalk'\nimport arg from 'next/dist/compiled/arg/index.js'\n\nimport { cliCommand } from '../bin/next'\nimport { setTelemetryEnabled, isTelemetryEnabled } from '../telemetry/storage'\n\nconst nextTelemetry: cliCommand = argv => {\n  const args = arg(\n    {\n      // Types\n      '--help': Boolean,\n      '--enable': Boolean,\n      '--disable': Boolean,\n      // Aliases\n      '-h': '--help',\n    },\n    { argv }\n  )\n\n  if (args['--help']) {\n    console.log(\n      `\n      Description\n        Allows you to control Next.js' telemetry collection\n\n      Usage\n        $ next telemetry [enable/disable]\n\n      You may pass the 'enable' or 'disable' argument to turn Next.js' telemetry collection on or off.\n\n      Learn more: ${chalk.cyan('https://nextjs.org/telemetry')}\n    `\n    )\n    return\n  }\n\n  let isEnabled = isTelemetryEnabled()\n\n  if (args['--enable'] || args._[0] === 'enable') {\n    setTelemetryEnabled(true)\n    console.log(chalk.cyan('Success!'))\n    console.log()\n\n    isEnabled = true\n  } else if (args['--disable'] || args._[0] === 'disable') {\n    setTelemetryEnabled(false)\n    if (isEnabled) {\n      console.log(chalk.cyan('Your preference has been saved.'))\n    } else {\n      console.log(\n        chalk.yellow(`Next.js' telemetry collection is already disabled.`)\n      )\n    }\n    console.log()\n\n    isEnabled = false\n  } else {\n    console.log(chalk.bold('Next.js Telemetry'))\n    console.log()\n  }\n\n  console.log(\n    `Status: ${\n      isEnabled ? chalk.bold.green('Enabled') : chalk.bold.red('Disabled')\n    }`\n  )\n  console.log()\n\n  if (isEnabled) {\n    console.log(\n      `Next.js telemetry is completely anonymous. Thank you for participating!`\n    )\n  } else {\n    console.log(`You have opted-out of Next.js' anonymous telemetry program.`)\n    console.log(`No data will be collected from your machine.`)\n  }\n\n  console.log(`Learn more: https://nextjs.org/telemetry`)\n  console.log()\n}\n\nexport { nextTelemetry }\n"],"mappings":"AAAA;AAAmB,aAAAA,OAAA,CAAAC,UAAA,MAAAD,OAAA,CAAAE,aAAA,QACnB,IAAAC,MAAA,CAAAC,sBAAA,CAAAC,OAAA,WACA,IAAAC,MAAA,CAAAF,sBAAA,CAAAC,OAAA,qCAGA,IAAAE,QAAA,CAAAF,OAAA,yBAA8E,SAAAD,uBAAAI,CAAA,SAAAA,CAAA,EAAAA,CAAA,CAAAP,UAAA,CAAAO,CAAA,EAAAC,OAAA,CAAAD,CAAA,GAE9E,KAAM,CAAAN,aAAyB,CAAGQ,IAAI,EAAI,CACxC,KAAM,CAAAC,IAAI,CAAG,GAAAC,cAAG,EACd,CACE;AACA,QAAQ,CAAEC,OAAO,CACjB,UAAU,CAAEA,OAAO,CACnB,WAAW,CAAEA,OAAO,CACpB;AACA,IAAI,CAAE,QACR,CAAC,CACD,CAAEH,IAAK,CACT,CAAC,CAED,GAAIC,IAAI,CAAC,QAAQ,CAAC,CAAE,CAClBG,OAAO,CAACC,GAAG,CACT;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoBC,cAAK,CAACC,IAAI,CAAC,8BAA8B,CAAC;AAC9D,KACI,CAAC,CACD,OACF,CAEA,GAAI,CAAAC,SAAS,CAAG,GAAAC,2BAAkB,EAAC,CAAC,CAEpC,GAAIR,IAAI,CAAC,UAAU,CAAC,EAAIA,IAAI,CAACS,CAAC,CAAC,CAAC,CAAC,GAAK,QAAQ,CAAE,CAC9C,GAAAC,4BAAmB,EAAC,IAAI,CAAC,CACzBP,OAAO,CAACC,GAAG,CAACC,cAAK,CAACC,IAAI,CAAC,UAAU,CAAC,CAAC,CACnCH,OAAO,CAACC,GAAG,CAAC,CAAC,CAEbG,SAAS,CAAG,IAAI,CAClB,CAAC,IAAM,IAAIP,IAAI,CAAC,WAAW,CAAC,EAAIA,IAAI,CAACS,CAAC,CAAC,CAAC,CAAC,GAAK,SAAS,CAAE,CACvD,GAAAC,4BAAmB,EAAC,KAAK,CAAC,CAC1B,GAAIH,SAAS,CAAE,CACbJ,OAAO,CAACC,GAAG,CAACC,cAAK,CAACC,IAAI,CAAC,iCAAiC,CAAC,CAAC,CAC5D,CAAC,IAAM,CACLH,OAAO,CAACC,GAAG,CACTC,cAAK,CAACM,MAAM,CAAC,oDAAoD,CACnE,CAAC,CACH,CACAR,OAAO,CAACC,GAAG,CAAC,CAAC,CAEbG,SAAS,CAAG,KAAK,CACnB,CAAC,IAAM,CACLJ,OAAO,CAACC,GAAG,CAACC,cAAK,CAACO,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAC5CT,OAAO,CAACC,GAAG,CAAC,CAAC,CACf,CAEAD,OAAO,CAACC,GAAG,CACT,WACEG,SAAS,CAAGF,cAAK,CAACO,IAAI,CAACC,KAAK,CAAC,SAAS,CAAC,CAAGR,cAAK,CAACO,IAAI,CAACE,GAAG,CAAC,UAAU,CAAC,EAExE,CAAC,CACDX,OAAO,CAACC,GAAG,CAAC,CAAC,CAEb,GAAIG,SAAS,CAAE,CACbJ,OAAO,CAACC,GAAG,CACT,yEACF,CAAC,CACH,CAAC,IAAM,CACLD,OAAO,CAACC,GAAG,CAAC,6DAA6D,CAAC,CAC1ED,OAAO,CAACC,GAAG,CAAC,8CAA8C,CAAC,CAC7D,CAEAD,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAAC,CACvDD,OAAO,CAACC,GAAG,CAAC,CAAC,CACf,CAAC,CAAAf,OAAA,CAAAE,aAAA,CAAAA,aAAA","ignoreList":[]}