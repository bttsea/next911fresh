{"version":3,"names":["exports","__esModule","nextBuild","_fs","require","_index","_interopRequireDefault","_path","_build","_utils","e","default","argv","args","arg","Boolean","printAndExit","dir","resolve","_","existsSync","build","then","process","exit","catch","err","console","error"],"sources":["next-build.ts"],"sourcesContent":["#!/usr/bin/env node\nimport { existsSync } from 'fs'\nimport arg from 'next/dist/compiled/arg/index.js'\nimport { resolve } from 'path'\n\nimport { cliCommand } from '../bin/next'\nimport build from '../build'\nimport { printAndExit } from '../server/lib/utils'\n\nconst nextBuild: cliCommand = argv => {\n  const args = arg(\n    {\n      // Types\n      '--help': Boolean,\n      // Aliases\n      '-h': '--help',\n    },\n    { argv }\n  )\n\n  if (args['--help']) {\n    printAndExit(\n      `\n      Description\n        Compiles the application for production deployment\n\n      Usage\n        $ next build <dir>\n\n      <dir> represents where the compiled dist folder should go.\n      If no directory is provided, the dist folder will be created in the current directory.\n      You can set a custom folder in config https://github.com/zeit/next.js#custom-configuration, otherwise it will be created inside '.next'\n    `,\n      0\n    )\n  }\n\n  const dir = resolve(args._[0] || '.')\n\n  // Check if the provided directory exists\n  if (!existsSync(dir)) {\n    printAndExit(`> No such directory exists as the project root: ${dir}`)\n  }\n\n  build(dir)\n    .then(() => process.exit(0))\n    .catch(err => {\n      // tslint:disable-next-line\n      console.error('> Build error occurred')\n      printAndExit(err)\n    })\n}\n\nexport { nextBuild }\n"],"mappings":"AAAA;AAAmB,aAAAA,OAAA,CAAAC,UAAA,MAAAD,OAAA,CAAAE,SAAA,QACnB,IAAAC,GAAA,CAAAC,OAAA,OACA,IAAAC,MAAA,CAAAC,sBAAA,CAAAF,OAAA,qCACA,IAAAG,KAAA,CAAAH,OAAA,SAGA,IAAAI,MAAA,CAAAF,sBAAA,CAAAF,OAAA,cACA,IAAAK,MAAA,CAAAL,OAAA,wBAAkD,SAAAE,uBAAAI,CAAA,SAAAA,CAAA,EAAAA,CAAA,CAAAT,UAAA,CAAAS,CAAA,EAAAC,OAAA,CAAAD,CAAA,GAElD,KAAM,CAAAR,SAAqB,CAAGU,IAAI,EAAI,CACpC,KAAM,CAAAC,IAAI,CAAG,GAAAC,cAAG,EACd,CACE;AACA,QAAQ,CAAEC,OAAO,CACjB;AACA,IAAI,CAAE,QACR,CAAC,CACD,CAAEH,IAAK,CACT,CAAC,CAED,GAAIC,IAAI,CAAC,QAAQ,CAAC,CAAE,CAClB,GAAAG,mBAAY,EACV;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,CACC,CACF,CAAC,CACH,CAEA,KAAM,CAAAC,GAAG,CAAG,GAAAC,aAAO,EAACL,IAAI,CAACM,CAAC,CAAC,CAAC,CAAC,EAAI,GAAG,CAAC,CAErC;AACA,GAAI,CAAC,GAAAC,cAAU,EAACH,GAAG,CAAC,CAAE,CACpB,GAAAD,mBAAY,EAAC,mDAAmDC,GAAG,EAAE,CAAC,CACxE,CAEA,GAAAI,cAAK,EAACJ,GAAG,CAAC,CACPK,IAAI,CAAC,IAAMC,OAAO,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC,CAC3BC,KAAK,CAACC,GAAG,EAAI,CACZ;AACAC,OAAO,CAACC,KAAK,CAAC,wBAAwB,CAAC,CACvC,GAAAZ,mBAAY,EAACU,GAAG,CAAC,CACnB,CAAC,CAAC,CACN,CAAC,CAAA1B,OAAA,CAAAE,SAAA,CAAAA,SAAA","ignoreList":[]}